### 索引：
##### 定义
    为了提高数据查询效率，就像书的目录一样
##### 常见模型
    1.哈希表
        定义：以kay-value的存储数据结构，我们只要输入待查找的key，就能找到对应的value
        适用场景：等值查询
        冲突的解决办法:链表
    2.有序数组
        有序数组索引只适用于静态存储引擎
        按顺序存储。查询用二分法就可以快速查询
    3.搜索树
        每个节点的左儿子小于父节点，父节点又小于右儿子
        查询时间复杂度O(log(N))，更新时间复杂度O(log(N))
        数据库存储大多不适用二叉树，因为树高过高，会适用N叉树
##### hash索引和b+树有什么区别
        1.hash索引底层是hash表，它是以key value的形式储存，适用于等值查询，但无法进行范围查询。当hash key发生冲突的时候，会影响查询效率
        2.b+树适用于范围查询和排序操作，因为她的叶子节点是有序的

##### innoDb的索引模型
    1.使用的是b+树索引模型，b+树能够很好的配合磁盘读写，减少单次查询的磁盘访问次数
    2.每一个索引都是一颗b+树
    3.索引类型分为主键索引和非主键索引
    4.主键索引又被称之为聚簇索引，主键索引叶子节点存的是整行数据
    5.非主键索引又被成为二级索引，非主键索引叶子节点存的是主键值

##### 主键索引和普通索引的查询有什么区别
    1.如果语句是select * from T where ID=500，即主键查询方式，则只需要搜索ID这棵B+树；
    2.如果语句是select * from T where k=5，即普通索引查询方式，则需要先搜索k索引树，得到ID的值为500，再到ID索引树搜索一次。这个过程称为回表。
##### 索引维护
    1.主键长度越小，普通索引的叶子节点就越小，普通节点占用的空间就越小
    2.从性能和存储空间考量，自增主键是最合理的选择
    3.有没有什么场景适合用业务字段直接做主键的呢？还是有的。比如，有些业务的场景需求是这样的：
        只有一个索引；
        该索引必须是唯一索引。
    没有普通索引就不必考虑主键索引的长度（普通索引叶子节点长度）了
##### 最左前缀原则
    联合索引遵循最左匹配原则，既最左优先
    
##### 问题
    1 对于上面例子中的InnoDB表T，如果你要重建索引 k，你的两个SQL语句可以这么写：

    alter table T drop index k;
    alter table T add index(k);
    如果你要重建主键索引，也可以这么写：
    
    alter table T drop primary key;
    alter table T add primary key(id);
    我的问题是，对于上面这两个重建索引的作法，说出你的理解。如果有不合适的，为什么，更好的方法是什么？

    答：如果删除新建主键索引，会同时去修改普通索引对应的主键索引，性能消耗较大。
       删除普通索引影响不大，不过注意得在业务低谷期操作，避免影响业务

##### 联合索引的技巧
    1、覆盖索引：如果查询条件使用的是普通索引（或是联合索引的最左原则字段），查询结果是联合索引的字段或是主键，不用回表操作，直接返回结果，减少IO磁盘读写读取正行数据
    2、最左前缀：联合索引的最左 N 个字段，也可以是字符串索引的最左 M 个字符
    3、联合索引：根据创建联合索引的顺序，以最左原则进行where检索，比如（age，name）以age=1 或 age= 1 and name=‘张三’可以使用索引，单以name=‘张三’ 不会使用索引，考虑到存储空间的问题，还请根据业务需求，将查找频繁的数据进行靠左创建索引。
    4、索引下推：like 'hello%’and age >10 检索，MySQL5.6版本之前，会对匹配的数据进行回表查询。5.6版本后，会先过滤掉age<10的数据，再进行回表查询，减少回表率，提升检索速度

##### mysql的联合索引是怎样储存的

    联合索引又被称之为复合索引，它是一种由多个列组成的索引，联合索引的存储和普通索引类似，但是他会在多个列上维护一个有序的数据结构，通常是b+树
